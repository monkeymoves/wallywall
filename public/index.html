<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Wally-Wall</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css" />
  <script type="module" src="./app.js" defer></script>
</head>
<body class="dark-theme">

  <!-- NAV BAR -->
  <header class="hdr">
    <button id="menuBtn" class="hdr-btn" aria-label="Boards menu">‚ò∞</button>
    <span class="hdr-title">WallyWall</span>

    <!-- view-mode: pick or new -->
    <select id="problemSelect" class="hdr-control problem-select">
      <option value="">‚Äî Select a problem ‚Äî</option>
    </select>
    <button id="newProblemBtn" class="hdr-control fab" aria-label="New problem">Ôºã</button>

    <!-- edit existing -->
    <button id="editProblemBtn" class="hdr-btn hidden" aria-label="Edit problem">‚úé</button>
    <button id="deleteProblemBtn" class="hdr-btn hidden" aria-label="Delete problem">üóëÔ∏è</button>

    <!-- draw-mode controls -->
    <div id="drawControls" class="hdr-control draw-toolbar hidden">
      <button data-type="start"  class="hold-btn active">Start</button>
      <button data-type="hold"   class="hold-btn">Hold</button>
      <button data-type="finish" class="hold-btn">Finish</button>
      <button data-type="delete" class="hold-btn">Delete</button>
    </div>
    <button id="finishDrawBtn" class="hdr-btn hidden" aria-label="Finish drawing">‚úì</button>
    <button id="cancelDrawBtn" class="hdr-btn hidden" aria-label="Cancel drawing">‚úï</button>
  </header>

  <!-- BOARDS SIDEBAR + AUTH PANEL -->
  <aside id="boardsPanel" class="boards-panel">
    <div class="sidebar-section">
      <h3>Account</h3>
      <!-- email/password login UI -->
      <div id="authPanel" class="auth-panel">
        <h3 id="authStatus"></h3>
        <p id="auth-description">Log in or create an account to save boards.</p>
        <input  id="emailInput"    type="email"    placeholder="Email" />
        <input  id="passwordInput" type="password" placeholder="Password" />
        <button id="loginBtn">Log In / Sign Up</button>
        <button id="signOutBtn" class="hidden">Sign Out</button>
      </div>
      <button id="enter-guest-code" class="btn">
        Use Guest Code
      </button>
    </div>

    <div class="sidebar-section">
      <h3>Boards</h3>
      <div class="board-panel">
        <div id="upload-controls" class="hidden">
          <h4>Upload your board</h4>
          <!-- Style the label as a button, and hide the default input -->
          <label for="file" class="btn">Choose File</label>
          <input id="file" type="file" class="file-upload-input" />
          <p id="fileStatus"></p>
        </div>
        <div id="boardsList"></div>
      </div>
    </div>
    <div id="board-owner-controls" class="sidebar-section hidden">
      <h3>Board Owner</h3>
      <div class="owner-controls-group">
        <h4>Guest Access</h4>
        <button id="generate-read-code" class="btn">Generate Read Code</button>
        <button id="generate-edit-code" class="btn">Generate Edit Code</button>
      </div>
      <div id="user-access-controls" class="owner-controls-group hidden">
        <ul id="shared-users-list"></ul>
      </div>
    </div>
  </aside>

  <!-- BOARD + OVERLAY -->
  <main id="boardMain" class="board-main">
    <div id="welcomeMessage" class="welcome-message">
      <h2>Welcome to WallyWall!</h2>
      <p>To get started, open the menu (‚ò∞) to create an account and upload a board, or enter a guest code.</p>
    </div>
    <div class="board-container hidden">
      <img    id="currentBoard" alt="Climbing board" />
      <canvas id="overlayCanvas"></canvas>
    </div>
    <div id="problemInfoCard" class="problem-info-card hidden">
      <span id="problemGradeDisplay" class="problem-grade-badge"></span>
      <p id="problemDescriptionText"></p>
    </div>
  </main>

  <!-- BOTTOM SHEET FOR NAMING / SAVING -->
  <div id="problemSheet" class="sheet">
    <div class="sheet-handle"></div>
    <div class="sheet-body">
      <input    id="problemName" placeholder="Problem name" />
      <textarea id="problemDesc" placeholder="Description (optional)"></textarea>
      <select id="problemGrade" placeholder="Grade">
        <option value="">‚Äî Select Grade ‚Äî</option>
        <option>V0</option>
        <option>V1</option>
        <option>V2</option>
        <option>V3</option>
        <option>V4</option>
        <option>V5</option>
        <option>V6</option>
        <option>V7</option>
        <option>V8</option>
        <option>V9</option>
        <option>V10</option>
        <option>V11</option>
        <option>V12</option>
        <option>V13</option>
        <option>V14</option>
        <option>V14+</option>
      </select>
      <div class="sheet-actions">
        <button id="cancelSheetBtn">Cancel</button>
        <button id="saveProblemBtn" class="primary">Save</button>
      </div>
    </div>
  </div>

</body>
</html>